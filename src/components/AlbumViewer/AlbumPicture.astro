---
import { Picture } from "astro:assets";
import MdiExpandAll from "~icons/mdi/arrow-expand-all";

export interface AlbumPictureProps {
    src: string | ImageMetadata;
    alt: string;
    href: string;
}

const { src, alt, href } = Astro.props as AlbumPictureProps;

/* Define a random color for the background - to be nice while the image loads */
const colorPalette = [
    "#C2DEDC",
    "#ECE5C7",
    "#CDC2AE",
    "#116A7B"
];
const randomColor = colorPalette[Math.floor(Math.random() * colorPalette.length)];
---

<a href={href} class="album-picture" style={`background-color: ${randomColor};`}>
    <div class="album-picture-shadowcaster">
        <MdiExpandAll class="expand-all"/>
    </div>
    <Picture
        src={src}
        alt={alt}
    ></Picture>
</a>

<style>
    .album-picture {
        object-fit: contain;
        position: relative;

        cursor: pointer;
    }

    .album-picture picture {
        height: 100%;
        width: 100%;
    }

    .album-picture img {
        display: block;
        height: 100%;
        width: 100%;
        object-fit: contain;
    }

    .album-picture-shadowcaster {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
            to bottom,
            rgba(0, 0, 0, 0.3) 0%,
            rgba(0, 0, 0, 0) 80%
        );
        opacity: 0;
        color: white;

        transition: opacity 0.2s ease-in-out;
    }

    .album-picture:hover .album-picture-shadowcaster {
        opacity: 1;
    }

    .album-picture-shadowcaster .expand-all {
        position: absolute;
        top: 0;
        right: 0;
        font-size: 1.5rem;
        color: black;
        border-radius: 9999px;
        background-color: rgba(255, 255, 255, 0.8);
        padding: 0.25rem;
        margin: 0.5rem;
    }

    .album-picture-shadowcaster .expand-all:hover {
        background-color: rgba(255, 255, 255, 1);
    }
</style>